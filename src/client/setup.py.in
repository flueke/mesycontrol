from cx_Freeze import setup, Executable
from os.path import join as pjoin
import sys

CSD = '${CMAKE_CURRENT_SOURCE_DIR}'

# Dependencies are automatically detected, but it might need
# fine tuning.
build_options = dict(
      packages = ['mesycontrol'],
      excludes = [],
      include_files = [(pjoin(CSD, 'ui'), 'ui')],
      init_script = pjoin(CSD, 'cxfreeze_init.py'),
      path = sys.path + [CSD]
      )

base_gui = 'Win32GUI' if sys.platform=='win32' else None

executables = [
    Executable(pjoin(CSD, 'mesycontrol_gui.py'), base=base_gui),
    Executable(pjoin(CSD, 'mesycontrol_script_runner.py'), base=None)
]

setup(name='@CMAKE_PROJECT_NAME@',
      version = '@GIT_VERSION@',
      description = 'mesycontrol',
      options = dict(build_exe = build_options),
      executables = executables,
      )
